version: '3.8'

services:
  avnav:
    image: wellenvogel/avnav:latest
    container_name: avnav
    restart: unless-stopped
    ports:
      - "${AVNAV_HTTP_PORT:-8082}:8080"
    volumes:
      - avnav-data:/home/avnav/data
      - avnav-charts:/home/avnav/data/charts
    environment:
      - TZ=UTC
    # Allow access to GPS and serial devices
    devices:
      - /dev/ttyUSB0:/dev/ttyUSB0
      - /dev/ttyACM0:/dev/ttyACM0
    # Privileged for USB device access
    privileged: false
    cap_add:
      - SYS_ADMIN
    networks:
      - avnav-net

volumes:
  avnav-data:
    driver: local
  avnav-charts:
    driver: local

networks:
  avnav-net:
    driver: bridge
